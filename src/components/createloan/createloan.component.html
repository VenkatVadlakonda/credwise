<app-table [columns]="columns" [data]="loans" [loading]="loading"></app-table>

<!-- EMI Plan Modal -->
<div class="modal" *ngIf="showEMIModal">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Generate EMI Plan</h2>
      <button class="close-btn" (click)="closeEMIModal()">&times;</button>
    </div>

    <form [formGroup]="emiForm" (ngSubmit)="submitEMIPlan()">
      <div class="form-group">
        <label for="loanId">Loan ID:</label>
        <input
          type="number"
          id="loanId"
          formControlName="loanId"
        />
        <div
          class="error"
          *ngIf="
            emiForm.get('loanId')?.invalid &&
            emiForm.get('loanId')?.touched
          "
        >
          Please enter a valid ID
        </div>
      </div>

      <div class="form-group">
        <label for="tenureInMonths">Tenure (Months)</label>
        <input
          type="number"
          id="tenureInMonths"
          formControlName="tenureInMonths"
        />
        <div
          class="error"
          *ngIf="
            emiForm.get('tenureInMonths')?.invalid &&
            emiForm.get('tenureInMonths')?.touched
          "
        >
          Please enter a valid tenure (minimum 1 month)
        </div>
      </div>

      <div class="form-group">
        <label for="interestRate">Interest Rate (%)</label>
        <input
          type="number"
          step="0.01"
          id="interestRate"
          formControlName="interestRate"
        />
        <div
          class="error"
          *ngIf="
            emiForm.get('interestRate')?.invalid &&
            emiForm.get('interestRate')?.touched
          "
        >
          Please enter a valid interest rate
        </div>
      </div>

      <div class="form-group">
        <label for="loanAmount">Loan Amount</label>
        <input type="number" id="loanAmount" formControlName="loanAmount" />
        <div
          class="error"
          *ngIf="
            emiForm.get('loanAmount')?.invalid &&
            emiForm.get('loanAmount')?.touched
          "
        >
          Please enter a valid loan amount
        </div>
      </div>

      <div class="form-group">
        <label for="startDate">Start Date</label>
        <input type="date" id="startDate" formControlName="startDate" />
        <div
          class="error"
          *ngIf="
            emiForm.get('startDate')?.invalid &&
            emiForm.get('startDate')?.touched
          "
        >
          Please select a start date
        </div>
      </div>

      <div class="modal-actions">
        <button type="button" (click)="closeEMIModal()">Cancel</button>
        <button type="submit" [disabled]="!emiForm.valid">Save</button>
      </div>
    </form>
  </div>
</div>
